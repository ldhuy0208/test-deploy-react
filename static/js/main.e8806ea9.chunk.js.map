{"version":3,"sources":["component/Cell.js","App.js","index.js"],"names":["Cell","props","openClass","isOpen","className","onClick","onOpen","onContextMenu","totalBoom","isFlag","isBoom","App","khoiTaoBoom","listBoom","hang","Math","round","random","cot","filter","ele","length","push","console","log","khoiTaoDanhSach","listAllCell","i","j","setState","list","demSoLuongBoomTamOXungQuanh","viTri","count","state","openACell","updateList","isMine","soLuongBoom","r1","c1","r2","HANG","c2","COT","moMotO","e","preventDefault","type","alert","isStarted","isWinGame","isWin","onFlag","startNewGame","time","this","src","alt","map","key","Date","getTime","PureComponent","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e8806ea9.chunk.js","sourcesContent":["import React from 'react'\r\nimport './Cell.scss'\r\nfunction Cell(props) {\r\n  const openClass = props.isOpen && \"open\"; \r\n  return (\r\n    <div className={\"cell \" + openClass} onClick={props.onOpen} onContextMenu={props.onOpen}>\r\n      \r\n      {(props.totalBoom !== null && props.totalBoom !== 0) ? props.totalBoom : props.isFlag ? 'F': ''}\r\n\r\n      {props.isBoom && 'B'}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cell\r\n","import React, { Component, PureComponent } from \"react\";\nimport Cell from \"./component/Cell\";\nimport \"./App.scss\";\n\nconst HANG = 4;\nconst COT = 3;\nconst SO_LUONG_BOOM = 2;\n\nexport class App extends  PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      list: [],\n      time: 0,\n      isStarted: false,\n      isWin: false,\n    };\n  }\n\n  khoiTaoBoom = () => {\n    const listBoom = [];\n    while (listBoom.length < SO_LUONG_BOOM) {\n      const hang = Math.round(Math.random() * (HANG - 1));\n      const cot = Math.round(Math.random() * (COT - 1));\n\n      const isExists =\n        listBoom.filter((ele) => ele.hang === hang && ele.cot === cot).length >\n        0;\n      if (!isExists) listBoom.push({ hang, cot });\n    }\n    console.log(listBoom);\n    return listBoom;\n  };\n\n  khoiTaoDanhSach = () => {\n    const listBoom = this.khoiTaoBoom();\n\n    const listAllCell = [];\n    for (let i = 0; i < HANG; i++) {\n      listAllCell[i] = [];\n      for (let j = 0; j < COT; j++) {\n        listAllCell[i][j] = {\n          isBoom:\n            listBoom.filter((ele) => ele.hang === i && ele.cot === j).length >\n            0,\n          isOpen: false,\n          isFlag: false,\n          totalBoom: null,\n        };\n      }\n    }\n\n    this.setState({ list: listAllCell });\n  };\n\n  demSoLuongBoomTamOXungQuanh = (viTri) => {\n    const { hang, cot } = viTri;\n    let count = 0;\n\n    for (let i = hang - 1; i <= hang + 1; i++) {\n      if (!(i >= 0 && i < HANG)) continue;\n      for (let j = cot - 1; j <= cot + 1 && j < COT && j >= 0; j++) {\n        if (!(j >= 0 && j < COT)) continue;\n        if (this.state.list[i][j].isBoom) count++;\n      }\n    }\n    return count;\n  };\n\n  openACell = (updateList, viTri) => {\n    const { hang, cot } = viTri;\n    if (updateList[hang][cot].isOpen) return false;\n\n    if (updateList[hang][cot].isMine) return true;\n\n    updateList[hang][cot].isOpen = true;\n    const soLuongBoom = this.demSoLuongBoomTamOXungQuanh(viTri);\n\n    if (soLuongBoom > 0) {\n      updateList[hang][cot].totalBoom = soLuongBoom;\n    } else {\n      let r1 = hang === 0 ? 0 : -1;\n      let c1 = cot === 0 ? 0 : -1;\n      let r2 = hang === HANG - 1 ? 1 : 2;\n      let c2 = cot === COT - 1 ? 1 : 2;\n\n      for (; r1 < r2; r1++)\n        for (let j = c1; j < c2; j++) {\n          this.openACell(updateList, { hang: hang + r1, cot: cot + j });\n        }\n    }\n    return false;\n  };\n\n  moMotO = (viTri, e) => {\n    e.preventDefault();\n\n    if (e.type === \"click\") {\n      const { hang, cot } = viTri;\n      if (this.state.list[hang][cot].isBoom) {\n        alert(\"Bùm\");\n        this.setState({ list: [] }, () => {\n          this.khoiTaoDanhSach();\n        });\n        return;\n      }\n      const updateList = this.state.list;\n      this.openACell(updateList, viTri);\n\n      this.setState(\n        {\n          list: updateList,\n          isStarted: true,\n        },\n        () => {\n          if (this.isWinGame()) {\n            this.khoiTaoDanhSach();\n          }\n        }\n      );\n    } else if (e.type === \"contextmenu\") {\n      console.log(\"Right click\");\n\n      const { hang, cot } = viTri;\n      const updateList = [...this.state.list];\n      updateList[hang][cot].isFlag = !this.state.list[hang][cot].isFlag;\n\n      this.setState({\n        list: updateList,\n      });\n    }\n  };\n\n  isWinGame = () => {\n    for (let i = 0; i < HANG; i++)\n      for (let j = 0; j < COT; j++) {\n        if (\n          this.state.list[i][j].isOpen === false &&\n          this.state.list[i][j].isBoom === false\n        )\n          return this.setState({ isWin: false });\n      }\n    this.setState({ isWin: true });\n  };\n  onFlag = (viTri) => {\n    const { hang, cot } = viTri;\n    const updateList = [...this.state.list];\n    updateList[hang][cot].isFlag = !this.state.list[hang][cot];\n\n    this.setState({\n      list: updateList,\n    });\n  };\n  startNewGame = () => {\n    this.khoiTaoDanhSach();\n    this.setState({\n      isWin: false,\n      time: 0,\n    });\n  };\n  componentDidMount() {\n    this.khoiTaoDanhSach();\n  }\n  render() {\n    return (\n      <div className=\"app\">\n        <header>\n          <div>Bom còn lại</div>\n          <div>\n            <button onClick={this.startNewGame}>\n              {this.state.isWin ? (\n                <img\n                  src=\"https://img.icons8.com/emoji/48/000000/smiling-face-with-sunglasses.png\"\n                  alt=\"new game\"\n                />\n              ) : (\n                <img\n                  src=\"https://img.icons8.com/emoji/48/000000/smirking-face.png\"\n                  alt=\"new game\"\n                />\n              )}\n            </button>\n          </div>\n          <div>Thời gian: {this.state.time}</div>\n        </header>\n        <main>\n          {this.state.list.map((hang, i) => (\n            <div key={Math.random() + new Date().getTime} className=\"row\">\n              {hang.map((cot, j) => (\n                <Cell\n                  key={Math.random() + new Date().getTime}\n                  onOpen={(e) => this.moMotO({ hang: i, cot: j }, e)}\n                  isBoom={this.state.list[i][j].isBoom}\n                  isOpen={this.state.list[i][j].isOpen}\n                  totalBoom={this.state.list[i][j].totalBoom}\n                  isFlag={this.state.list[i][j].isFlag}\n                />\n              ))}\n            </div>\n          ))}\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from './App'\n\n\nReactDOM.render(<App/>, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA npm install mongodb\n"],"sourceRoot":""}